function Templator(c){var d={settings:{language:"",cache:{enabled:false,life:32000,tick:1000},action:"inject"}};d.templates={};if(d.settings.cache.enabled){d.cache={}}if(d.settings.cache.life>0&&d.settings.cache.enabled){d.cacheHandler=setInterval(d.releaseCache,d.settings.cache.tick)}d.cacheRelease=function(){if(jQuery.isEmptyObject(d.cache)){return}for(var g in d.cache){if(!d.cache.hasOwnProperty(g)){continue}var f=d.cache[g];if((+(new Date())-f.time)<=d.settings.cache.life){delete d.cache[g]}}};d.clearOn=function(){d.element=null;return d};d.on=function(f){d.element=f;return d};d.storeElement=function(f,g,h){return d.store(f,g,h,"element")};d.store=function(f,h,i,g){d.templates[f]={element:g!=null?h:false,url:g!=null?false:h,params:i!=null?i:{},partials:{}};if(d.settings.cache.enabled){d.cache[f]={data:a(h,g),time:+(new Date())}}return d};d.partialElement=function(g,h,f){return d.partial(g,h,f,"element")};d.partial=function(m,n,f,k){if(m instanceof Object){for(var h in m){if(!m.hasOwnProperty(h)){continue}var g=h,l=m[h],j=k!=null?$(l).html():a(l);d.templates[f].partials[h]=b(j,(n||{}),true)}}return d};d.renderElement=function(f,g){return d.render(f,g,"element")};d.appendElement=function(f,g){return d.render(f,g,"element","append")};d.prependElement=function(f,g){return d.render(f,g,"element","prepend")};d.append=function(f,g){return d.render(f,g,null,"append")};d.prepend=function(f,g){return d.render(f,g,null,"prepend")};d.render=function(l,m,h,k){m=m!=null?m:d.templates[l]!=null&&!jQuery.isEmptyObject(d.templates[l].params)?d.templates[l].params:{};d.settings.action=k!=null?k:"inject";if(d.templates[l]==null){return b(a(l,h),m)}var j=d.templates[l];if(!jQuery.isEmptyObject(j.partials)){for(var g in j.partials){if(!j.partials.hasOwnProperty(g)){continue}var f=g;if(!f.indexOf("#")||!f.indexOf(".")){f=f.slice(1,f.length)}if(f.indexOf("/")!=-1&&f.indexOf(".")!=-1){f=url.split("/")[url.split("/").length].split(".")[0]}m[f]=j.partials[g]}}if(j.element){h="element"}if(d.settings.cache.enabled&&d.cache[l]!=null){return b(d.cache[l].data,m)}if(h!=null){return b(a(j.element,h),m)}return b(a(j.url),m)};d.renderRaw=function(f,h,g){d.settings.action=g!=null?g:"inject";return b(f,h)};function e(f){$.extend(true,d.settings,(f||{}));return d}function a(h,f){var g=null;if(f!=null&&f.toLowerCase()=="element"){return $(h).html()}$.ajax({async:!1,global:!1,url:h,success:function(i){g=i}});return g}function b(i,m,g){var h,f;switch(d.settings.language.toLowerCase()){case"haml":h=Haml(i);f=h(m);break;case"jst":case"jstparser":f=Jst.evaluateSingleShot(i,m);break;case"jsmart":case"smarty":case"sm":f=(new jSmart(i)).fetch(m);break;case"moustache":case"ms":f=Mustache.to_html(i,m);break;case"trimpath":case"trim":f=i.process(m);break;case"yajet":var l=new YAJET({with_scope:true}),k=l.compile(i);f=k(m);break;default:function j(n,q){for(var o in q){n=n.replace(new RegExp("{"+o+"}","g"),q[o])}return n}f=j(i,m)}if(d.element!=null&&g==null){switch(d.settings.action){case"append":$(d.element).append(f);case"prepend":$(d.element).prepend(f);case"inject":default:$(d.element).html(f)}}return f}return e(c)};